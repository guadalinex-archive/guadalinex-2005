<?xml version='1.0' encoding='iso-8859-1'?>

<!-- Example of anidation -->

<!-- 3Com OfficeConnect 812 -->
<cmd_list>
  <initial_cmd>verif3com</initial_cmd>
<!--  <eth_params dev='/dev/eth0' ip='10.0.0.1' port='23'/> -->
  <serial_params tty='0' baudrate='9600' bits='8' parity='N' stopbits='1' xonxoff='0' rtscts='0'/>
  <default_timeout>15</default_timeout>
  <!-- Primero se reseta a los valores de fabrica: -->

  <cmd_func id='auth3com'>
    <cmd send='' exp_ok='PassTESTTESTd:'>
      <expect_list>
        <expect out='(CLI -|>)'>
          <cmd send='exit cli' exp_ok='Password:'/>
        </expect>
	<expect out='Password:'>
          <cmd send='' exp_ok='PasTESTsword:'>
	    <expect_list>
	      <expect out='Password:'>
		<cmd send='a' exp_ok='Password:'/>
	      </expect>
	    </expect_list>
	  </cmd>
        </expect>
      </expect_list>
    </cmd>
    <cmd send='adminttd' exp_ok='>'>
      <expect_list>
        <expect out='Password:'>
          <cmd return='1'/>
        </expect>
      </expect_list>
    </cmd>
  </cmd_func>  

  <cmd_func id='verif3com'>
    <cmd call='auth3com'/>
    <cmd send='exitTESTTEST cli' exp_ok='Password:' on_excep='excepExample3com'/>
  </cmd_func>  

  <cmd_func id='excepExample3com'>
    <cmd send='exit cli' exp_ok='Password:'/>
  </cmd_func>  

</cmd_list>
